# WP Gmail Plugin インストールガイド

## パッケージ情報
- **ファイル名**: `wp-gmail-plugin-v1.2.0.zip`
- **ファイルサイズ**: 67KB
- **バージョン**: 1.2.0（セキュリティ強化版）
- **場所**: `dist/wp-gmail-plugin-v1.2.0.zip`

## システム要件
- **WordPress**: 5.8以上
- **PHP**: 7.2以上
- **必要な拡張**: OpenSSL（パスワード暗号化用）
- **推奨**: Gmail 2段階認証 + アプリパスワード

## インストール手順

### 1. WordPressプラグインとしてインストール

1. WordPressダッシュボードにログイン
2. **プラグイン** → **新規追加** をクリック
3. **プラグインのアップロード** をクリック
4. `wp-gmail-plugin-v1.2.0.zip` ファイルを選択
5. **今すぐインストール** をクリック
6. インストール完了後、**プラグインを有効化** をクリック

### 2. 初期設定

1. **設定** → **WP Gmail Mailer** に移動
2. 以下の情報を入力：
   - **Gmail アドレス**: あなたのGmailアドレス
   - **アプリ パスワード**: Googleアプリパスワード（16文字）
   - **From アドレス**: 送信元アドレス（省略可）
   - **From 名称**: 送信者名
   - **暗号化方式**: TLS（推奨）またはSSL
3. **変更を保存** をクリック

### 3. Googleアプリパスワードの取得

1. [Google アカウント](https://myaccount.google.com/) にアクセス
2. **セキュリティ** タブを選択
3. **2段階認証プロセス** を有効化（必須）
4. **アプリパスワード** を生成
5. 「メール」→「その他」を選択し、「WordPress」等の名前を入力
6. 生成された16文字のパスワードをプラグイン設定に入力

### 4. テスト送信

1. 設定ページ下部の **テスト送信** セクション
2. 受信可能なメールアドレスを入力
3. **テストメールを送信** をクリック
4. 成功メッセージが表示され、メールが届くことを確認

## セキュリティ機能（v1.2.0の新機能）

### ✅ 強化されたセキュリティ対策
- **パスワード暗号化**: AES-256-CBCでアプリパスワードを暗号化保存
- **レート制限**: テストメール送信を10分間3回までに制限
- **ログ保護**: .htaccessでログファイルへの直接アクセスを防止
- **XSS対策**: 出力の適切なサニタイズ
- **エラー情報制御**: 本番環境での詳細エラー非表示

### 🔒 セキュリティ設定の確認

インストール後、以下が自動的に作成されます：
- `wp-content/uploads/wpgp-logs/.htaccess` - ログアクセス制限
- `wp-content/uploads/wpgp-logs/index.php` - ディレクトリリスト防止

## トラブルシューティング

### よくある問題

**1. 「認証に失敗しました」エラー**
- アプリパスワードが正しく入力されているか確認
- Gmailアカウントで2段階認証が有効になっているか確認
- アプリパスワードを再生成して試行

**2. メール送信エラー**
- Gmailの送信制限（1日500通）に達していないか確認
- From アドレスがGmailアドレスと異なる場合、空にして試行
- ポート設定を確認（TLS: 587、SSL: 465）

**3. レート制限エラー**
- テストメール送信は10分間3回までです
- 制限時間経過後に再試行してください

### ログの確認

エラーが発生した場合：
1. 設定ページの **ログビューア** セクションで詳細を確認
2. 必要に応じてログをダウンロードしてサポートに提供

## アンインストール

プラグインを無効化・削除すると：
- 全ての設定データが削除されます
- ログファイルも自動的に削除されます
- WordPressのメール送信は標準の `wp_mail()` に戻ります

## サポート

- **プラグイン設定**: WordPress管理画面 → 設定 → WP Gmail Mailer
- **ログ確認**: 設定ページ下部のログビューア
- **技術仕様**: `SECURITY_REPORT.md` および `SECURITY_IMPROVEMENTS.md` を参照

---
*WP Gmail Plugin v1.2.0 - セキュリティ強化版*
*インストール日: 2025-09-13*