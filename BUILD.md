# WordPress Plugin Build Tools

WP Gmail Pluginã‚’é…å¸ƒå¯èƒ½ãªZIPãƒ•ã‚¡ã‚¤ãƒ«ã«å¤‰æ›ã™ã‚‹ãŸã‚ã®ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«é›†ã§ã™ã€‚

## ğŸ› ï¸ åˆ©ç”¨å¯èƒ½ãªãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«

### 1. PowerShellç‰ˆï¼ˆæ¨å¥¨ï¼‰
**ãƒ•ã‚¡ã‚¤ãƒ«**: `build-plugin.ps1`

æœ€ã‚‚é«˜æ©Ÿèƒ½ã§ã€è©³ç´°ãªè¨­å®šã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’æä¾›ã—ã¾ã™ã€‚

#### ä½¿ç”¨æ–¹æ³•
```powershell
# åŸºæœ¬çš„ãªãƒ“ãƒ«ãƒ‰
.\build-plugin.ps1

# ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®š
.\build-plugin.ps1 -Version "1.2.0"

# è©³ç´°å‡ºåŠ›
.\build-plugin.ps1 -Version "1.2.0" -Verbose

# ãƒ†ã‚¹ãƒˆã‚¹ã‚­ãƒƒãƒ—
.\build-plugin.ps1 -SkipTests

# å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæŒ‡å®š
.\build-plugin.ps1 -OutputDir "release"
```

#### æ©Ÿèƒ½
- âœ… PHPæ§‹æ–‡ãƒã‚§ãƒƒã‚¯
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«æ¤œè¨¼
- âœ… ãƒãƒ¼ã‚¸ãƒ§ãƒ³è‡ªå‹•æ›´æ–°
- âœ… CSS/JSæœ€é©åŒ–
- âœ… è©³ç´°ãƒ­ã‚°
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- âœ… ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æƒ…å ±ç”Ÿæˆ

### 2. ãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ç‰ˆ
**ãƒ•ã‚¡ã‚¤ãƒ«**: `build-plugin.bat`

Windowsã§æ‰‹è»½ã«ä½¿ãˆã‚‹ç°¡æ˜“ç‰ˆã§ã™ã€‚

#### ä½¿ç”¨æ–¹æ³•
```cmd
# ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã§å®Ÿè¡Œ
build-plugin.bat
```

#### æ©Ÿèƒ½
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ”ãƒ¼
- âœ… ZIPä½œæˆ
- âœ… åŸºæœ¬çš„ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

### 3. Node.jsç‰ˆï¼ˆé«˜æ©Ÿèƒ½ï¼‰
**ãƒ•ã‚¡ã‚¤ãƒ«**: `build-tool.js` + `package.json`

æœ€ã‚‚æŸ”è»Ÿã§æ‹¡å¼µå¯èƒ½ãªãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

#### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install
```

#### ä½¿ç”¨æ–¹æ³•
```bash
# åŸºæœ¬ãƒ“ãƒ«ãƒ‰
npm run build

# é–‹ç™ºç‰ˆãƒ“ãƒ«ãƒ‰
npm run build:dev

# æœ¬ç•ªç‰ˆãƒ“ãƒ«ãƒ‰ï¼ˆæœ€é©åŒ–ã‚ã‚Šï¼‰
npm run build:prod

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°
npm run package

# ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã¿
npm run validate

# ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—
npm run version:patch  # 1.0.0 â†’ 1.0.1
npm run version:minor  # 1.0.0 â†’ 1.1.0
npm run version:major  # 1.0.0 â†’ 2.0.0

# ã‚«ã‚¹ã‚¿ãƒ ã‚ªãƒ—ã‚·ãƒ§ãƒ³
node build-tool.js --version 1.5.0 --optimize --verbose
```

#### æ©Ÿèƒ½
- âœ… é«˜åº¦ãªãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†
- âœ… CSS/JSæœ€é©åŒ–
- âœ… è©³ç´°ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- âœ… æŸ”è»Ÿãªè¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³
- âœ… ã‚«ãƒ©ãƒ¼å‡ºåŠ›
- âœ… é€²æ—è¡¨ç¤º
- âœ… ã‚¨ãƒ©ãƒ¼è©³ç´°

## ğŸ“¦ ãƒ“ãƒ«ãƒ‰çµæœ

ã™ã¹ã¦ã®ãƒ„ãƒ¼ãƒ«ã¯ä»¥ä¸‹ã®æ§‹é€ ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™ï¼š

```
dist/
â”œâ”€â”€ wp-gmail-plugin-v1.0.0.zip    # ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç”¨ZIPãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ install-info.json             # ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æƒ…å ±
â””â”€â”€ build.log                     # ãƒ“ãƒ«ãƒ‰ãƒ­ã‚°ï¼ˆVerboseæ™‚ï¼‰
```

## ğŸ¯ ZIPãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹

ç”Ÿæˆã•ã‚Œã‚‹ZIPãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ä»¥ä¸‹ãŒå«ã¾ã‚Œã¾ã™ï¼š

```
wp-gmail-plugin/
â”œâ”€â”€ wp-gmail-plugin.php           # ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ README.md                     # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ uninstall.php                 # ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‡¦ç†
â”œâ”€â”€ includes/                     # PHPã‚¯ãƒ©ã‚¹
â”‚   â”œâ”€â”€ class-gmail-api-client.php
â”‚   â”œâ”€â”€ class-gmail-oauth.php
â”‚   â”œâ”€â”€ class-gmail-email-manager.php
â”‚   â””â”€â”€ functions.php
â”œâ”€â”€ templates/                    # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ admin-main.php
â”‚   â”œâ”€â”€ admin-settings.php
â”‚   â”œâ”€â”€ admin-compose.php
â”‚   â”œâ”€â”€ admin-inbox.php
â”‚   â”œâ”€â”€ shortcode-compose.php
â”‚   â””â”€â”€ shortcode-inbox.php
â”œâ”€â”€ assets/                       # CSS/JS
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ style.css
â”‚   â”‚   â””â”€â”€ admin-style.css
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ script.js
â”‚       â””â”€â”€ admin-script.js
â””â”€â”€ languages/                    # ç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«
    â””â”€â”€ wp-gmail-plugin.pot
```

## ğŸš€ WordPressã¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

1. **ZIPãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**
   - `dist/wp-gmail-plugin-v1.0.0.zip`ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

2. **WordPressã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**
   - WordPressç®¡ç†ç”»é¢ â†’ ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ â†’ æ–°è¦è¿½åŠ 
   - ã€Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
   - ZIPãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ã€Œä»Šã™ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€

3. **ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æœ‰åŠ¹åŒ–**
   - ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†å¾Œã€Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æœ‰åŠ¹åŒ–ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

4. **è¨­å®šã‚’å®Œäº†**
   - Gmail â†’ è¨­å®š ã§APIèªè¨¼æƒ…å ±ã‚’è¨­å®š

## âš™ï¸ ãƒ“ãƒ«ãƒ‰è¨­å®šã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### PowerShellç‰ˆã®è¨­å®š
`build-plugin.ps1`ã®ä¸Šéƒ¨ã§è¨­å®šã‚’å¤‰æ›´ã§ãã¾ã™ï¼š

```powershell
$PluginName = "wp-gmail-plugin"
$PluginMainFile = "wp-gmail-plugin.php"
$BuildDir = Join-Path $PSScriptRoot $OutputDir
```

### Node.jsç‰ˆã®è¨­å®š
`build-tool.js`ã®`CONFIG`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§è¨­å®šã‚’å¤‰æ›´ã§ãã¾ã™ï¼š

```javascript
const CONFIG = {
    pluginName: 'wp-gmail-plugin',
    pluginMainFile: 'wp-gmail-plugin.php',
    outputDir: 'dist',
    excludePatterns: [
        '*.log',
        '*.tmp',
        // è¿½åŠ ã®é™¤å¤–ãƒ‘ã‚¿ãƒ¼ãƒ³
    ]
};
```

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. PowerShellå®Ÿè¡Œãƒãƒªã‚·ãƒ¼ã‚¨ãƒ©ãƒ¼
```powershell
# å®Ÿè¡Œãƒãƒªã‚·ãƒ¼ã‚’ä¸€æ™‚çš„ã«å¤‰æ›´
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser

# ã¾ãŸã¯ã€ãƒã‚¤ãƒ‘ã‚¹ã—ã¦å®Ÿè¡Œ
powershell -ExecutionPolicy Bypass -File .\build-plugin.ps1
```

#### 2. PHPæ§‹æ–‡ã‚¨ãƒ©ãƒ¼
- PHPãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- `php -v`ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèª
- `-SkipTests`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚¹ã‚­ãƒƒãƒ—å¯èƒ½

#### 3. Node.jsä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼
```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
npm cache clean --force

# å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
rm -rf node_modules package-lock.json
npm install
```

#### 4. ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ã‚¯ã‚»ã‚¹ã‚¨ãƒ©ãƒ¼
- ç®¡ç†è€…æ¨©é™ã§å®Ÿè¡Œ
- ã‚¢ãƒ³ãƒã‚¦ã‚¤ãƒ«ã‚¹ã‚½ãƒ•ãƒˆã®é™¤å¤–è¨­å®š
- ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½¿ç”¨ä¸­ã§ãªã„ã‹ç¢ºèª

## ğŸ“‹ ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

ãƒ“ãƒ«ãƒ‰å‰ã«ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

- [ ] å¿…é ˆãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹
- [ ] PHPæ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãŒãªã„
- [ ] ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ãŒæ­£ã—ã„
- [ ] ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ãŒå«ã¾ã‚Œã¦ã„ãªã„
- [ ] è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒé©åˆ‡

## ğŸ”„ ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

### GitHub Actionsã®ä¾‹
```yaml
name: Build Plugin

on:
  push:
    tags:
      - 'v*'

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      - run: npm install
      - run: npm run build:prod
      - uses: actions/upload-artifact@v3
        with:
          name: plugin-zip
          path: dist/*.zip
```

## ğŸ“ ãƒ­ã‚°ã¨ãƒ‡ãƒãƒƒã‚°

### PowerShellç‰ˆ
- `-Verbose`ãƒ•ãƒ©ã‚°ã§è©³ç´°ãƒ­ã‚°
- `dist/build.log`ã«ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ

### Node.jsç‰ˆ
- `--verbose`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§è©³ç´°å‡ºåŠ›
- ã‚«ãƒ©ãƒ¼å‡ºåŠ›ã§è¦‹ã‚„ã™ã„è¡¨ç¤º

## ğŸ¤ è²¢çŒ®

ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã®æ”¹å–„ææ¡ˆã‚„ãƒã‚°å ±å‘Šã¯ã€GitHubã®Issuesã¾ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã¯ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æœ¬ä½“ã¨åŒã˜GPL v2ä»¥é™ã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã§é…å¸ƒã•ã‚Œã¦ã„ã¾ã™ã€‚
